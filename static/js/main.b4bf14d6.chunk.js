(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(7),r=n.n(o),s=(n(14),n(2)),i=n(0);var l=function(){return Object(i.jsx)("header",{className:"header",children:Object(i.jsx)("div",{className:"header__logo"})})},u=n(6);var p=function(e){return Object(i.jsxs)("article",{className:"card",children:[Object(i.jsx)("img",{src:"".concat(e.card.link),alt:e.card.name,className:"card__pic",onClick:function(){e.onCardClick(e.card)}}),Object(i.jsx)("button",{type:"button",className:"card__delete","aria-label":"delete-card",onClick:function(){e.onDeletePlaceClick(e.card)}}),Object(i.jsxs)("div",{className:"card__content",children:[Object(i.jsx)("h2",{className:"card__title",children:e.card.name}),Object(i.jsxs)("div",{className:"card__like-container",children:[Object(i.jsx)("button",{type:"button",className:"card__like-btn","aria-label":"like"}),Object(i.jsx)("p",{className:"card__like-total",children:e.card.likes.length})]})]})]})},d=n(8),j=n(9),b=new(function(){function e(t,n){Object(d.a)(this,e),this.url=t,this.options=n,this.groupId="group-12"}return Object(j.a)(e,[{key:"getUserData",value:function(){return fetch("".concat(this.url).concat(this.groupId,"/users/me"),this.options).then((function(e){return e.ok?e.json():Promise.reject("Error:".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this.url,"/").concat(this.groupId,"/cards"),this.options).then((function(e){return e.ok?e.json():Promise.reject("Error:".concat(e.status))}))}},{key:"updateUser",value:function(e){return fetch("".concat(this.url,"/").concat(this.groupId,"/users/me"),{method:"PATCH",headers:this.options.headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("Error:".concat(e.status))}))}},{key:"addCard",value:function(e){return fetch("".concat(this.url,"/").concat(this.groupId,"/cards"),{method:"POST",headers:this.options.headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error:".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.url,"/").concat(this.groupId,"/cards/").concat(e),{method:"DELETE",headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error:".concat(e.status))}))}},{key:"addLike",value:function(e){return fetch("".concat(this.url,"/").concat(this.groupId,"/cards/likes/").concat(e),{method:"PUT",headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error:".concat(e.status))}))}},{key:"removeLike",value:function(e){return fetch("".concat(this.url,"/").concat(this.groupId,"/cards/likes/").concat(e),{method:"DELETE",headers:this.options.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error:".concat(e.status))}))}},{key:"changeProfilePic",value:function(e){return fetch("".concat(this.url,"/").concat(this.groupId,"/users/me/avatar"),{method:"PATCH",headers:this.options.headers,body:JSON.stringify({avatar:e.avatar})}).then((function(e){return e.ok?e.json():Promise.reject("Error:".concat(e.status))}))}}]),e}())("https://around.nomoreparties.co/v1/",{method:"GET",headers:{authorization:"e09604a5-57aa-4b20-9a83-ea66e5c6924b","Content-Type":"application/json"}});var m=function(e){var t=e.onEditAvatarClick,n=e.onEditProfileClick,c=e.onAddPlaceClick,o=e.onCardClick,r=e.onDeletePlaceClick,l=Object(a.useState)(),d=Object(s.a)(l,2),j=d[0],m=d[1],h=Object(a.useState)(),_=Object(s.a)(h,2),O=_[0],f=_[1],x=Object(a.useState)(),k=Object(s.a)(x,2),v=k[0],C=k[1],g=Object(a.useState)([]),N=Object(s.a)(g,2),y=N[0],E=N[1],P={backgroundImage:"url(".concat(v,")")};return Object(a.useEffect)((function(){b.getUserData().then((function(e){m(e.name),C(e.avatar),f(e.about)})).catch((function(e){return"Error: ".concat(e)}))}),[]),Object(a.useEffect)((function(){b.getInitialCards().then((function(e){E([].concat(Object(u.a)(e),Object(u.a)(y)))})).catch((function(e){return"Error: ".concat(e)}))}),[E]),Object(i.jsxs)("main",{className:"content",children:[Object(i.jsxs)("section",{className:"profile",children:[Object(i.jsxs)("div",{className:"profile__container",children:[Object(i.jsx)("div",{className:"profile__avatar",style:P,children:Object(i.jsx)("button",{type:"button",className:"profile__edit-avatar","aria-label":"edit-avatar",onClick:t})}),Object(i.jsxs)("div",{className:"profile__detail",children:[Object(i.jsxs)("div",{className:"profile__text",children:[Object(i.jsx)("h1",{className:"profile__name",children:j}),Object(i.jsx)("p",{className:"profile__job",children:O})]}),Object(i.jsx)("button",{type:"button",className:"profile__edit-btn","aria-label":"edit-name",onClick:n})]})]}),Object(i.jsx)("button",{type:"button",className:"profile__add-btn","aria-label":"add-profile",onClick:c})]}),"``",Object(i.jsx)("section",{className:"cards",children:y.map((function(e){return Object(i.jsx)(p,{card:e,onCardClick:o,onDeletePlaceClick:r},e._id)}))})]})};var h=function(){return Object(i.jsx)("footer",{className:"footer",children:"\xa9 2021 Around The U.S."})};var _=function(e){return Object(i.jsx)("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_opened":""," "),children:Object(i.jsxs)("form",{name:"form-".concat(e.name),method:"post",className:"popup__form popup__".concat(e.name," "),children:[Object(i.jsx)("h3",{className:"popup__title",children:e.title}),e.children,Object(i.jsx)("button",{type:"submit",className:"popup__btn popup__btn_type_save","aria-label":"save","data-text-original":"".concat(e.btnText),"data-text-saving":"".concat(e.loadingBtnText),children:e.btnText}),Object(i.jsx)("button",{type:"button",className:"popup__btn popup__btn_type_close","aria-label":"close",onClick:e.onClose})]})})};var O=function(e){return Object(i.jsxs)(_,{title:"Edit Profile",name:"edit-profile",btnText:"Save",isOpen:e.isOpen,loadingBtnText:"Saving...",onClose:e.onClose,children:[Object(i.jsx)("input",{type:"text",name:"name",className:"popup__input popup__input_type_name",placeholder:"Name",id:"name-input",required:!0}),Object(i.jsx)("span",{className:"popup__error name-input-error"}),Object(i.jsx)("input",{type:"text",name:"about",className:"popup__input popup__input_type_job",placeholder:"About me",id:"job-input",required:!0}),Object(i.jsx)("span",{className:"popup__error job-input-error"})]})};var f=function(e){return Object(i.jsxs)(_,{title:"New Place",name:"add-card",btnText:"Create",isOpen:e.isOpen,loadingBtnText:"Saving...",onClose:e.onClose,children:[Object(i.jsx)("input",{type:"text",name:"name",className:"popup__input popup__input_type_img-title",placeholder:"Title",id:"img-input",required:!0}),Object(i.jsx)("span",{className:"popup__error img-input-error"}),Object(i.jsx)("input",{type:"text",name:"link",className:"popup__input popup__input_type_link",placeholder:"Image link",id:"link-input",required:!0}),Object(i.jsx)("span",{className:"popup__error link-input-error"})]})};var x=function(e){return Object(i.jsx)(_,{title:"Are you sure?",name:"confirm-delete",btnText:"Yes",isOpen:e.isOpen,onClose:e.onClose})};var k=function(e){return Object(i.jsxs)(_,{title:"Change profile picture",name:"edit-avatar",btnText:"Yes",isOpen:e.isOpen,loadingBtnText:"Saving...",onClose:e.onClose,children:[Object(i.jsx)("input",{type:"text",name:"avatar",className:"popup__input popup__input_type_link",placeholder:"Image link",id:"avatar-input",required:!0}),Object(i.jsx)("span",{className:"popup__error avatar-input-error"})]})};var v=function(e){return Object(i.jsx)("div",{className:"popup ".concat(e.isOpen?"popup_opened":""," "),"data-image":"popup__view_image",children:Object(i.jsxs)("figure",{className:"popup__card",children:[Object(i.jsx)("img",{src:"".concat(e.selectedCard),className:"popup__img",alt:e.name}),Object(i.jsx)("figcaption",{className:"popup__img-caption"}),Object(i.jsx)("button",{type:"button",className:"popup__btn popup__btn_type_close","aria-label":"close",onClick:e.onClose})]})})};var C=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),r=Object(s.a)(o,2),u=r[0],p=r[1],d=Object(a.useState)(!1),j=Object(s.a)(d,2),b=j[0],_=j[1],C=Object(a.useState)(!1),g=Object(s.a)(C,2),N=g[0],y=g[1],E=Object(a.useState)(!1),P=Object(s.a)(E,2),T=P[0],S=P[1],I=Object(a.useState)(null),w=Object(s.a)(I,2),L=w[0],A=w[1];function D(){_(!1),c(!1),p(!1),y(!1),S(!1),A(null)}function B(e){"Escape"===e.key&&D()}function q(e){e.target.classList.contains("popup_opened")&&D()}return Object(a.useEffect)((function(){return document.addEventListener("click",q),function(){document.removeEventListener("click",q)}})),Object(a.useEffect)((function(){return window.addEventListener("keydown",B),function(){window.removeEventListener("keydown",B)}})),Object(i.jsx)("div",{className:"root",children:Object(i.jsxs)("div",{className:"root__container",children:[Object(i.jsx)(l,{}),Object(i.jsx)(m,{onEditProfileClick:function(){c(!0)},onAddPlaceClick:function(){p(!0)},onEditAvatarClick:function(){_(!0)},onDeletePlaceClick:function(e){S(!0),A(e._id)},onCardClick:function(e){y(!0),A(e.link)}}),Object(i.jsx)(h,{}),Object(i.jsx)(O,{isOpen:n,onClose:D,on:!0}),Object(i.jsx)(f,{isOpen:u,onClose:D}),Object(i.jsx)(x,{isOpen:T,onClose:D}),Object(i.jsx)(k,{isOpen:b,onClose:D}),Object(i.jsx)(v,{isOpen:N,onClose:D,selectedCard:L})]})})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))};r.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(C,{})}),document.getElementById("root")),g()}},[[16,1,2]]]);
//# sourceMappingURL=main.b4bf14d6.chunk.js.map